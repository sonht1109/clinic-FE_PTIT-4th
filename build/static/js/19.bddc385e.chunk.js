(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[19],{300:function(n,t,e){"use strict";e.r(t);var i,a,o,c,r=e(70),d=e(1),l=e(68),s=e(57),u=e(18),b=e(3),p=e(84),f="Notifications/SET_DATA",x="Notifications/CHANGE_PAGE",j="Notifications/CHANGE_PAGE_SIZE",h="Notifications/REFETCH",g={pageNumber:1,pageSize:p.a,total:0,data:[],shouldRefetch:!1,unread:0},O=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(b.a)(Object(b.a)({},n),{},{data:Object(u.a)(t.payload.data),total:t.payload.total,unread:t.payload.unread});case x:return Object(b.a)(Object(b.a)({},n),{},{pageNumber:t.payload});case j:return Object(b.a)(Object(b.a)({},n),{},{pageSize:t.payload});case h:return Object(b.a)(Object(b.a)({},n),{},{shouldRefetch:!n.shouldRefetch});default:return Object(b.a)({},n)}},m=e(6),v=e(4),_=e(13),N=v.default.div(i||(i=Object(m.a)(["\n  background: rgba(255, 255, 255, 0.5);\n  border: 1px solid #ffffff;\n  box-sizing: border-box;\n  box-shadow: 0px 12px 32px rgba(108, 127, 155, 0.1);\n  border-radius: 12px;\n  padding: 40px 56px;\n  margin-top: 36px;\n\n  @media (max-width: 767px) {\n    padding: 15px;\n  }\n\n  .module-header {\n    font-weight: bold;\n    font-size: 16px;\n    line-height: 24px;\n    text-transform: uppercase;\n    color: #333b6a;\n    & > span {\n      color: #ff4b4b;\n    }\n  }\n\n  .module-content {\n    .list {\n      padding: 0 16px;\n      margin: 24px 0;\n\n      @media (max-width: 767px) {\n        padding: 0 5px;\n      }\n    }\n  }\n"]))),E=v.default.div(a||(a=Object(m.a)(["\n  background: #ffffff;\n  border: 1px solid #e8eff3;\n  box-sizing: border-box;\n  border-radius: 12px;\n  padding: 20px 28px;\n  margin: 16px 0;\n  position: relative;\n\n  .action-btn {\n    position: absolute;\n    right: 24px;\n    top: 20px;\n    cursor: pointer;\n  }\n\n  .notification {\n    &__title {\n      color: ",";\n      font-weight: 500;\n      font-size: 14px;\n      line-height: 21px;\n      padding-right: 16px;\n      .title {\n        position: relative;\n      }\n      ",";\n    }\n\n    &__timestamp {\n      font-size: 10px;\n      line-height: 21px;\n      color: ",";\n      margin-bottom: 16px;\n    }\n\n    &__content {\n      font-size: 12px;\n      line-height: 16px;\n      color: ",";\n      padding-top: 16px;\n      border-top: 1px solid #e8eff3;\n    }\n  }\n"])),(function(n){return n.isRead?_.a.color.text_gray:_.a.color.primary}),(function(n){return!n.isRead&&Object(v.css)(o||(o=Object(m.a)(["\n          .title:after {\n            content: '';\n            width: 8px;\n            height: 8px;\n            border-radius: 4px;\n            background-color: #ff4b4b;\n            position: absolute;\n            left: calc(100% + 8px);\n            top: 6px;\n          }\n        "])))}),_.a.color.green,_.a.color.text_gray),z=v.default.div(c||(c=Object(m.a)(["\n  position: absolute;\n  width: max-content;\n  top: 20px;\n  right: 0;\n\n  background: #ffffff;\n  border: 1px solid #dfe9f5;\n  box-sizing: border-box;\n  box-shadow: 0px 12px 32px rgba(108, 127, 155, 0.1);\n  border-radius: 8px;\n\n  padding: 11px 0;\n\n  .action-item {\n    display: flex;\n    align-items: center;\n    flex-wrap: nowrap;\n    padding: 5px 16px;\n    &__icon {\n      margin-right: 8px;\n    }\n    &__label {\n      font-size: 14px;\n      line-height: 21px;\n      text-align: center;\n      color: #333b6a;\n    }\n    &:hover {\n      .action-item__icon {\n        & > svg > path {\n          fill: #00cb82;\n        }\n      }\n      .action-item__label {\n        color: #00cb82;\n      }\n    }\n  }\n"]))),R=e(69),w=e(9),C=e(24),y=e(32),A=e(33),S=e(46),I=function(n,t,e){return Object(C.action)(f,{data:n,total:t,unread:e})},T=function(n){return function(t){Object(y.b)({method:"POST",url:A.a.VIEW_NOTIFICATION.CONFIRM_READ(n)}).then((function(n){console.log(n.data),n.data&&t(Object(C.action)(h))})).catch((function(n){Object(S.a)(n)}))}},k=function(n){return n.Notifications},P=e(17),F=e(8),G=e(2);function L(n){var t=n.n;return Object(G.jsxs)(E,{isRead:(null===t||void 0===t?void 0:t.isRead)||!1,children:[Object(G.jsx)(D,{id:null===t||void 0===t?void 0:t.id,isRead:(null===t||void 0===t?void 0:t.isRead)||!1}),Object(G.jsx)("div",{className:"notification__title",children:Object(G.jsx)("span",{className:"title",children:null===t||void 0===t?void 0:t.title})}),Object(G.jsx)("span",{className:"notification__timestamp",children:"30 Ph\xfat tr\u01b0\u1edbc"}),Object(G.jsx)("div",{className:"notification__content",children:null===t||void 0===t?void 0:t.content})]})}var D=function(n){var t=n.id,e=n.isRead,i=Object(d.useState)(!1),a=Object(P.a)(i,2),o=a[0],c=a[1],r=Object(d.useRef)(null);return Object(d.useEffect)((function(){var n=r.current,t=function(t){n&&!n.contains(t.target)&&c(!1)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),function(){document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[c]),Object(G.jsxs)("div",{className:"action-btn",onClick:function(){return c((function(n){return!n}))},ref:r,children:[Object(G.jsx)(F.l,{size:16,color:"#A6B0CF"}),o&&Object(G.jsx)(H,{id:t,isRead:e})]},t)},H=function(n){var t=n.id,e=n.isRead,i=Object(w.b)();return Object(G.jsx)(z,{children:!e&&Object(G.jsxs)("div",{className:"action-item",onClick:function(){i(T(t))},children:[Object(G.jsx)("div",{className:"action-item__icon",children:Object(G.jsx)(F.h,{size:16,color:"#A6B0CF"})}),Object(G.jsx)("span",{className:"action-item__label",children:"\u0110\xe1nh d\u1ea5u l\xe0 \u0111\xe3 \u0111\u1ecdc"})]})})},B=e(86);function J(n){Object(r.a)(n),Object(s.a)("Notifications",O);var t=Object(w.b)(),e=Object(w.c)(k),i=e.data,a=e.total,o=e.pageNumber,c=e.pageSize,u=e.shouldRefetch,b=e.unread;return Object(d.useEffect)((function(){t(function(n){var t=n.pageNumber,e=n.pageSize;return function(n){Object(y.b)({method:"GET",url:A.a.VIEW_NOTIFICATION.GET,params:{page:t,sizePerPage:e}}).then((function(t){var e,i,a,o;(null===t||void 0===t?void 0:t.data)&&n(I(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data,null===t||void 0===t||null===(i=t.data)||void 0===i||null===(a=i.meta)||void 0===a?void 0:a.itemCount,null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.totalUnread))})).catch((function(n){Object(S.a)(n)}))}}({pageNumber:o,pageSize:c}))}),[u,o,c,t]),Object(G.jsx)(l.a,{children:Object(G.jsx)(R.a,{header:"Dashboard",children:Object(G.jsxs)(N,{children:[Object(G.jsxs)("div",{className:"module-header",children:["th\xf4ng b\xe1o ",Object(G.jsxs)("span",{children:["(",b,")"]})]}),Object(G.jsxs)("div",{className:"module-content",children:[Object(G.jsx)("div",{className:"list",children:d.Children.toArray(i.map((function(n){return Object(G.jsx)(L,{n:n})})))}),Object(G.jsx)(B.a,{current:o,pageSize:c,total:a,handleChangePageSize:function(n){return t(function(n){return Object(C.action)(j,n)}(n))},onChange:function(n){return t(function(n){return Object(C.action)(x,n)}(n))}})]})]})})})}t.default=Object(d.memo)(J)}}]);