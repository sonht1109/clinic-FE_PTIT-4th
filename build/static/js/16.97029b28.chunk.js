(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[16],{296:function(e,t,n){"use strict";n.r(t);var a,i,c,o=n(3),l=n(17),r=n(70),s=n(1),d=n(68),b=n(57),u="AdminNotifys/GET",j="AdminNotifys/SEARCH",h="AdminNotifys/PAGINATION",p="AdminNotifys/CHANGE_PAGE_SIZE",g="AdminNotifys/CHANGE_PAGE",x={data:[],total:0,search:{status:"",keyword:""},pagination:{pageSize:10,pageNumber:1}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var n=t.payload,a=n.data,i=n.total;return Object(o.a)(Object(o.a)({},e),{},{data:a,total:i});case j:return Object(o.a)(Object(o.a)({},e),{},{search:Object(o.a)(Object(o.a)({},e.search),{},{keyword:t.payload})});case h:return Object(o.a)(Object(o.a)({},e),{},{pagination:{pageNumber:t.payload.pageNumber,pageSize:t.payload.pageSize}});case p:return Object(o.a)(Object(o.a)({},e),{},{pageSize:t.payload});case g:return Object(o.a)(Object(o.a)({},e),{},{pageNumber:t.payload});default:return Object(o.a)({},e)}},O=n(6),f=n(4),v=f.default.div(a||(a=Object(O.a)(["\n  margin-top: 32px;\n  .header-container {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    align-items: center;\n    .title {\n      font-size: 16px;\n      font-weight: 500;\n      line-height: 24px;\n      color: #333b6a;\n      text-transform: uppercase;\n    }\n    .search {\n      display: flex;\n      input {\n        width: 277px;\n        height: 40px;\n        box-sizing: border-box;\n        border: 1px solid #dfe9f5;\n        padding: 10px 10px 10px 16px;\n        border-top-left-radius: 4px;\n        border-bottom-left-radius: 4px;\n        font-size: 14px;\n        font-weight: 400;\n        line-height: 20px;\n        color: #9ab1cc;\n        &::placeholder {\n          font-size: 14px;\n          font-weight: 400;\n          line-height: 20px;\n          color: #9ab1cc;\n        }\n      }\n      button {\n        margin-left: 1px;\n        border-top-left-radius: 0px;\n        border-bottom-left-radius: 0px;\n      }\n    }\n  }\n  .tools {\n    padding-top: 32px;\n    padding-bottom: 8px;\n    .tool-item {\n      margin-left: 16px;\n      .delete {\n        &:after {\n          color: #ff6c6c;\n        }\n        &:hover {\n          border-color: #ff6c6c;\n        }\n      }\n    }\n  }\n  @media only screen and (max-width: 600px) {\n    .header-container {\n      display: block;\n      .search {\n        margin-top: 10px;\n        display: flex;\n        justify-content: flex-end;\n        input {\n          height: 36px;\n        }\n        button {\n          height: 36px;\n        }\n      }\n    }\n  }\n"]))),N=f.default.div(i||(i=Object(O.a)(["\n  padding: 44px 56px;\n  .handle {\n    padding-bottom: 36px;\n    .handle-item {\n      margin-bottom: 20px;\n    }\n  }\n  .button-group {\n    display: flex;\n    justify-content: flex-end;\n    margin: 0 -8px;\n    button {\n      margin: 0 8px;\n    }\n  }\n  @media only screen and (max-width: 600px) {\n    padding: 30px 15px;\n    .button-group {\n      justify-content: center;\n      button {\n        font-size: 14px;\n        width: 135px;\n        margin: 0 4px;\n      }\n    }\n  }\n"]))),y=f.default.div(c||(c=Object(O.a)(["\n  padding: 44px 15px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  .desc {\n    margin-top: 44px;\n    margin-bottom: 32px;\n    text-align: center;\n    font-size: 20px;\n    font-weight: 500;\n    line-height: 30px;\n    color: #333b6a;\n  }\n  .button-group {\n    display: flex;\n    justify-content: center;\n    margin: 0 -8px;\n    button {\n      margin: 0 8px;\n    }\n  }\n  @media only screen and (max-width: 600px) {\n    padding: 30px 15px;\n    .button-group {\n      button {\n        font-size: 14px;\n        width: 135px;\n        margin: 0 4px;\n      }\n    }\n  }\n"]))),w=n(32),C=n(33),S=n(85),k=n(61),z=n(124),T=n(69),A=n(46),E=n(275),M=n(8),P=n(271),F=n(31),G=n(125),I=n(47),R=n(106),q=n(58),B=n(59),H=n(63),X=n(71),D=n(67),V=n.p+"static/media/delete-noti.0e7bc9f7.png",Y=n(9),_=function(e){return e.AdminNoticeManagement},J=(n(24),n(272)),L=n(127),U=n(86),K=n(2),W=[{name:"Trang ch\u1ee7"},{name:"Thi\u1ebft l\u1eadp h\u1ec7 th\u1ed1ng"},{name:"Th\xf4ng b\xe1o"}],Z=[{name:"#"},{name:"Ch\u1ee7 \u0111\u1ec1"},{name:"N\u1ed9i dung"},{name:"Ng\u01b0\u1eddi nh\u1eadn"},{name:"Tr\u1ea1ng th\xe1i"}],Q="create",$="edit",ee="delete",te={create:{title:"T\u1ea1o m\u1edbi th\xf4ng b\xe1o",size:718},edit:{title:"Ch\u1ec9nh s\u1eeda th\xf4ng b\xe1o",size:718},delete:{title:"X\xf3a th\xf4ng b\xe1o",size:715}};function ne(e){Object(r.a)(e);var t=Object(s.useState)(10),n=Object(l.a)(t,2),a=n[0],i=n[1],c=Object(s.useState)(1),o=Object(l.a)(c,2),p=o[0],g=o[1],x=Object(I.b)(),O=x.register,f=x.handleSubmit;Object(b.a)("AdminNoticeManagement",m);var N=Object(s.useState)(null),y=Object(l.a)(N,2),E=y[0],R=y[1],q=Object(s.useState)(Q),B=Object(l.a)(q,2),H=B[0],V=B[1],J=Object(X.a)(),ne=J.isOpen,ce=J.toggleModal,oe=Object(s.useState)(Object(K.jsx)(ae,{toggleModal:ce,setActiveRow:R})),le=Object(l.a)(oe,2),re=le[0],se=le[1],de=Object(Y.b)(),be=Object(Y.c)(_),ue=be.pagination,je=be.total,he=be.search,pe=be.data,ge=Object(s.useCallback)((function(){Object(w.b)({method:"GET",url:C.a.NOTIFYS.GET,params:{page:ue.pageNumber,sizePerPage:ue.pageSize,title:he.keyword||""}}).then((function(e){de(function(e,t){return{type:u,payload:{data:e,total:t}}}(e.data.data,e.data.meta.itemCount))})).catch((function(e){return Object(A.a)(e)}))}),[he,ue]);Object(s.useEffect)((function(){ge()}),[he,ue]);var xe=pe.length>0?pe.map((function(e,t){return Object(K.jsxs)("tr",{onClick:function(){(null===E||void 0===E?void 0:E.id)===(null===e||void 0===e?void 0:e.id)?R(null):R(e)},className:(null===E||void 0===E?void 0:E.id)===(null===e||void 0===e?void 0:e.id)?"active":"",children:[Object(K.jsxs)("td",{children:[Object(K.jsx)(G.a.Checkbox,{checked:(null===E||void 0===E?void 0:E.id)===(null===e||void 0===e?void 0:e.id)})," "]}),Object(K.jsx)("td",{children:null===e||void 0===e?void 0:e.title}),Object(K.jsx)("td",{children:null===e||void 0===e?void 0:e.content}),Object(K.jsx)("td",{children:null===e||void 0===e?void 0:e.receiver}),Object(K.jsx)("td",{children:1===(null===e||void 0===e?void 0:e.status)?"\u0110ang ho\u1ea1t \u0111\u1ed9ng":"Ng\u01b0ng ho\u1ea1t \u0111\u1ed9ng"})]})})):Object(K.jsx)("tr",{children:Object(K.jsx)("td",{colSpan:Z.length,children:"Kh\xf4ng c\xf3 th\xf4ng b\xe1o"})}),me=Object(s.useCallback)((function(e,t){de({type:h,payload:{pageNumber:e,pageSize:t}})}),[]);return Object(K.jsx)(d.a,{children:Object(K.jsx)(T.a,{header:"Thi\u1ebft l\u1eadp h\u1ec7 th\u1ed1ng",links:W,children:Object(K.jsxs)(v,{children:[Object(K.jsxs)("div",{className:"header-container",children:[Object(K.jsx)("div",{className:"title",children:"Th\xf4ng b\xe1o"}),Object(K.jsxs)("div",{className:"search",children:[Object(K.jsx)(L.a.Text,{name:"keyword",ref:O,placeholder:"Nh\u1eadp ch\u1ee7 \u0111\u1ec1 "}),Object(K.jsx)(F.a,{height:"40px",width:"160px",onClick:f((function(e){var t;console.log(e.keyword),void 0!==e.keyword&&(R(null),de((t=e.keyword,{type:j,payload:t})))})),children:"T\xecm ki\u1ebfm"})]})]}),Object(K.jsxs)("div",{className:"tools",style:{display:"flex"},children:[Object(K.jsx)("div",{className:"tool-item",children:Object(K.jsx)(k.a,{tooltip:"Th\xeam m\u1edbi",onClick:function(){se(Object(K.jsx)(ae,{setActiveRow:R,toggleModal:ce,refetch:ge})),V(Q),ce(!0)},children:Object(K.jsx)(M.B,{size:16,color:"#A6B0CF"})})}),Object(K.jsx)("div",{className:"tool-item",children:Object(K.jsx)(k.a,{className:"delete",tooltip:"X\xf3a",onClick:function(){null===E?Object(S.a)({name:"Ch\u1ecdn th\xf4ng b\xe1o c\u1ea7n x\xf3a!",icon:"error"}):(se(Object(K.jsx)(ie,{setActiveRow:R,toggleModal:ce,item:E,refetch:ge})),V(ee),ce(!0))},children:Object(K.jsx)(M.I,{size:16,color:"#A6B0CF"})})}),Object(K.jsx)("div",{className:"tool-item",children:Object(K.jsx)(k.a,{tooltip:"S\u1eeda",children:Object(K.jsx)(P.a,{size:16,color:"#A6B0CF",onClick:function(){null===E?Object(S.a)({name:"Ch\u1ecdn th\xf4ng b\xe1o c\u1ea7n s\u1eeda!",icon:"error"}):(se(Object(K.jsx)(ae,{setActiveRow:R,toggleModal:ce,item:E,refetch:ge})),V($),ce(!0))}})})})]}),Object(K.jsx)("div",{className:"table-container",children:Object(K.jsxs)(z.a,{header:Z,children:[xe,pe.length>0&&Object(K.jsx)("tr",{children:Object(K.jsx)("td",{colSpan:100,children:Object(K.jsx)(U.a,{handleChangePageSize:function(e){i(e),me(p,e)},current:ue.pageNumber,total:je,pageSize:ue.pageSize,onChange:function(e){g(e),me(e,a)}})})})]})}),Object(K.jsx)(D.b,{isOpen:ne,toggleModal:ce,title:te[H].title,overwriteModalStyle:{maxWidth:te[H].size},children:re})]})})})}t.default=Object(s.memo)(ne);var ae=function(e){var t=e.toggleModal,n=e.item,a=e.setActiveRow,i=e.refetch,c=Object(I.b)(),l=c.register,r=c.handleSubmit,d=c.errors,b=c.control,u=c.watch,j=c.setValue,h=c.getValues,p=Object(H.a)();return Object(s.useEffect)((function(){n&&(j("title",null===n||void 0===n?void 0:n.title),j("content",null===n||void 0===n?void 0:n.content),j("receiver",ce.filter((function(e){return e.value===(null===n||void 0===n?void 0:n.receiver)}))[0]),0===(null===n||void 0===n?void 0:n.status)?j("status",oe[1]):j("status",oe[0]),console.log(oe.filter((function(e){return e.value===h("status")}))))}),[n]),Object(K.jsxs)(N,{children:[Object(K.jsxs)("div",{className:"handle",children:[Object(K.jsxs)("div",{className:"handle-item",children:[Object(K.jsx)(q.a.Text,{inputProps:{name:"title"},wrapperProps:{label:"Ch\u1ee7 \u0111\u1ec1",icon:Object(K.jsx)(M.z,{size:12}),className:"form-item"},register:l({required:p.formatMessage(Object(o.a)({},B.a.required),{field:B.a.title.defaultMessage})})}),Object(K.jsx)(R.a,{errors:d,field:"title"})]}),Object(K.jsxs)("div",{className:"handle-item",children:[Object(K.jsx)(q.a.Select,{selectProps:{name:"receiver",options:ce},wrapperProps:{label:"Ng\u01b0\u1eddi nh\u1eadn",icon:Object(K.jsx)(J.b,{size:12}),className:"form-item"},control:b,name:"receiver",watch:u,rules:{required:p.formatMessage(Object(o.a)({},B.a.required),{field:B.a.receiver.defaultMessage})},defaultValue:ce.filter((function(e){return e.value===h("receiver")})).length>0?ce.filter((function(e){return e.value===h("receiver")}))[0]:void 0}),Object(K.jsx)(R.a,{errors:d,field:"receiver"})]}),Object(K.jsxs)("div",{className:"handle-item",children:[Object(K.jsx)(q.a.Select,{selectProps:{name:"status",options:oe},wrapperProps:{label:"Tr\u1ea1ng th\xe1i",icon:Object(K.jsx)(M.G,{size:12}),className:"form-item"},control:b,name:"status",watch:u,defaultValue:oe.filter((function(e){return e.value===h("status")})).length>0?oe.filter((function(e){return e.value===h("status")}))[0]:void 0}),Object(K.jsx)(R.a,{errors:d,field:"status"})]}),Object(K.jsxs)("div",{className:"handle-item",children:[Object(K.jsx)(q.a.Textarea,{textareaProps:{name:"content"},wrapperProps:{label:"N\u1ed9i dung",icon:Object(K.jsx)(E.b,{size:12}),className:"form-item"},register:l({required:p.formatMessage(Object(o.a)({},B.a.required),{field:B.a.content.defaultMessage})})}),Object(K.jsx)(R.a,{errors:d,field:"content"})]})]}),Object(K.jsxs)("div",{className:"button-group",children:[Object(K.jsx)(F.a,{background:"white",color:"#718098",onClick:function(){t(!1),a(null)},children:"H\u1ee7y b\u1ecf"}),Object(K.jsx)(F.a,{onClick:r((function(e){var c=e.receiver,o=e.status,l=e.title,r=e.content;console.log(e);var s=new FormData;s.append("receiver","".concat(c.value)),s.append("title","".concat(l)),s.append("content","".concat(r)),"1"===o.value?s.append("status","1"):s.append("status","0"),n?Object(w.c)({method:"PUT",url:C.a.NOTIFYS.UPDATE(n.id),data:{title:l,content:r,receiver:c.value,status:+o.value}}).then((function(e){Object(S.a)({name:"S\u1eeda th\xf4ng b\xe1o th\xe0nh c\xf4ng",icon:"success"}),i(),a(null),t(!1)})).catch((function(e){Object(S.a)({name:e.message,icon:"error"})})):Object(w.c)({method:"POST",url:C.a.NOTIFYS.CREATE,data:{title:l,content:r,receiver:c.value,status:+o.value}}).then((function(e){Object(S.a)({name:"Th\xeam th\xf4ng b\xe1o th\xe0nh c\xf4ng",icon:"success"}),i(),a(null),t(!1)})).catch((function(e){Object(S.a)({name:e.message,icon:"error"})}))})),children:"X\xe1c nh\u1eadn"})]})]})},ie=function(e){var t=e.toggleModal,n=e.item,a=e.setActiveRow,i=e.refetch;return Object(K.jsxs)(y,{children:[Object(K.jsx)("div",{className:"image",children:Object(K.jsx)("img",{src:V,alt:""})}),Object(K.jsx)("div",{className:"desc",children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn x\xf3a th\xf4ng b\xe1o n\xe0y kh\xf4ng ?"}),Object(K.jsxs)("div",{className:"button-group",children:[Object(K.jsx)(F.a,{background:"white",color:"#718098",onClick:function(){t(!1),a(null)},children:"H\u1ee7y b\u1ecf"}),Object(K.jsx)(F.a,{background:"#FF6C6C",border:"1px solid #FF6C6C",onClick:function(){Object(w.b)({method:"DELETE",url:C.a.NOTIFYS.DELETE,data:{ids:[null===n||void 0===n?void 0:n.id]}}).then((function(e){i(),t(!1),a(null),Object(S.a)({name:"X\xf3a th\xf4ng b\xe1o th\xe0nh c\xf4ng!",icon:"success"})})).catch((function(e){return Object(A.a)(e)}))},children:"X\xf3a"})]})]})},ce=[{value:"admin",label:"Admin"},{value:"user",label:"Ng\u01b0\u1eddi t\u1ea1o"}],oe=[{value:"1",label:"\u0110ang ho\u1ea1t \u0111\u1ed9ng"},{value:"0",label:"Ng\u01b0ng ho\u1ea1t \u0111\u1ed9ng"}]}}]);